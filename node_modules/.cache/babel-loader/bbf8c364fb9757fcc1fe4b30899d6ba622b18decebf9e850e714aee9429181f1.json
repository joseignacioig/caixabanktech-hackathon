{"ast":null,"code":"var _jsxFileName = \"/Users/joseignacio/Developer/caixabanktech-hackathon/src/components/AlertBanner.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useStore } from \"@nanostores/react\";\nimport { transactionsStore } from \"../stores/transactionStore\";\nimport { userSettingsStore } from \"../stores/userSettingsStore\";\nimport { Alert, Collapse } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AlertBanner() {\n  _s();\n  const transactions = useStore(transactionsStore);\n  const userSettings = useStore(userSettingsStore);\n\n  // Extract the necessary values from user settings (budget limits, category limits, alerts status).\n  const {\n    categoryLimits,\n    alertsEnabled\n  } = userSettings;\n\n  // If alerts are disabled in the settings, return null to avoid rendering the component.\n  if (!alertsEnabled) return null;\n\n  // Calculate the total expenses and income from the transaction data.\n  const totalExpenses = transactions.filter(transaction => transaction.type === \"expense\").reduce((acc, transaction) => acc + transaction.amount, 0);\n  const totalIncome = transactions.filter(transaction => transaction.type === \"income\").reduce((acc, transaction) => acc + transaction.amount, 0);\n\n  // Calculate the balance and check if it's negative.\n  const balance = totalIncome - totalExpenses;\n  const isBalanceNegative = balance < 0;\n\n  // Calculate expenses per category and check if any category limit has been exceeded.\n  const categoryExpenses = transactions.reduce((acc, transaction) => {\n    if (transaction.type === \"expense\") {\n      acc[transaction.category] = (acc[transaction.category] || 0) + transaction.amount;\n    }\n    return acc;\n  }, {});\n  const exceededCategories = Object.keys(categoryLimits).filter(category => categoryExpenses[category] > categoryLimits[category]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Collapse, {\n      in: isBalanceNegative,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: [\"Warning: Your account balance is negative (\", balance.toFixed(2), \" \\u20AC)!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), exceededCategories.map(category => /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"warning\",\n      sx: {\n        mb: 2\n      },\n      children: [\"You have exceeded your budget limit for \", category, \" (\", categoryLimits[category], \" \\u20AC)!\"]\n    }, category, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(AlertBanner, \"Pc/X/GWj/hOlIIgpVBFOy84uX6s=\", false, function () {\n  return [useStore, useStore];\n});\n_c = AlertBanner;\nexport default AlertBanner;\nvar _c;\n$RefreshReg$(_c, \"AlertBanner\");","map":{"version":3,"names":["React","useStore","transactionsStore","userSettingsStore","Alert","Collapse","jsxDEV","_jsxDEV","AlertBanner","_s","transactions","userSettings","categoryLimits","alertsEnabled","totalExpenses","filter","transaction","type","reduce","acc","amount","totalIncome","balance","isBalanceNegative","categoryExpenses","category","exceededCategories","Object","keys","children","in","severity","sx","mb","toFixed","fileName","_jsxFileName","lineNumber","columnNumber","map","_c","$RefreshReg$"],"sources":["/Users/joseignacio/Developer/caixabanktech-hackathon/src/components/AlertBanner.js"],"sourcesContent":["import React from \"react\";\nimport { useStore } from \"@nanostores/react\";\nimport { transactionsStore } from \"../stores/transactionStore\";\nimport { userSettingsStore } from \"../stores/userSettingsStore\";\nimport { Alert, Collapse } from \"@mui/material\";\n\nfunction AlertBanner() {\n  const transactions = useStore(transactionsStore);\n  const userSettings = useStore(userSettingsStore);\n\n  // Extract the necessary values from user settings (budget limits, category limits, alerts status).\n  const { categoryLimits, alertsEnabled } = userSettings;\n\n  // If alerts are disabled in the settings, return null to avoid rendering the component.\n  if (!alertsEnabled) return null;\n\n  // Calculate the total expenses and income from the transaction data.\n  const totalExpenses = transactions\n    .filter((transaction) => transaction.type === \"expense\")\n    .reduce((acc, transaction) => acc + transaction.amount, 0);\n\n  const totalIncome = transactions\n    .filter((transaction) => transaction.type === \"income\")\n    .reduce((acc, transaction) => acc + transaction.amount, 0);\n\n  // Calculate the balance and check if it's negative.\n  const balance = totalIncome - totalExpenses;\n  const isBalanceNegative = balance < 0;\n\n  // Calculate expenses per category and check if any category limit has been exceeded.\n  const categoryExpenses = transactions.reduce((acc, transaction) => {\n    if (transaction.type === \"expense\") {\n      acc[transaction.category] =\n        (acc[transaction.category] || 0) + transaction.amount;\n    }\n    return acc;\n  }, {});\n\n  const exceededCategories = Object.keys(categoryLimits).filter(\n    (category) => categoryExpenses[category] > categoryLimits[category]\n  );\n\n  return (\n    <div>\n      {/* Negative balance alert */}\n      <Collapse in={isBalanceNegative}>\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          Warning: Your account balance is negative ({balance.toFixed(2)} €)!\n        </Alert>\n      </Collapse>\n\n      {/* Alerts by category */}\n      {exceededCategories.map((category) => (\n        <Alert severity=\"warning\" sx={{ mb: 2 }} key={category}>\n          You have exceeded your budget limit for {category} (\n          {categoryLimits[category]} €)!\n        </Alert>\n      ))}\n    </div>\n  );\n}\n\nexport default AlertBanner;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C,SAASC,iBAAiB,QAAQ,4BAA4B;AAC9D,SAASC,iBAAiB,QAAQ,6BAA6B;AAC/D,SAASC,KAAK,EAAEC,QAAQ,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,SAASC,WAAWA,CAAA,EAAG;EAAAC,EAAA;EACrB,MAAMC,YAAY,GAAGT,QAAQ,CAACC,iBAAiB,CAAC;EAChD,MAAMS,YAAY,GAAGV,QAAQ,CAACE,iBAAiB,CAAC;;EAEhD;EACA,MAAM;IAAES,cAAc;IAAEC;EAAc,CAAC,GAAGF,YAAY;;EAEtD;EACA,IAAI,CAACE,aAAa,EAAE,OAAO,IAAI;;EAE/B;EACA,MAAMC,aAAa,GAAGJ,YAAY,CAC/BK,MAAM,CAAEC,WAAW,IAAKA,WAAW,CAACC,IAAI,KAAK,SAAS,CAAC,CACvDC,MAAM,CAAC,CAACC,GAAG,EAAEH,WAAW,KAAKG,GAAG,GAAGH,WAAW,CAACI,MAAM,EAAE,CAAC,CAAC;EAE5D,MAAMC,WAAW,GAAGX,YAAY,CAC7BK,MAAM,CAAEC,WAAW,IAAKA,WAAW,CAACC,IAAI,KAAK,QAAQ,CAAC,CACtDC,MAAM,CAAC,CAACC,GAAG,EAAEH,WAAW,KAAKG,GAAG,GAAGH,WAAW,CAACI,MAAM,EAAE,CAAC,CAAC;;EAE5D;EACA,MAAME,OAAO,GAAGD,WAAW,GAAGP,aAAa;EAC3C,MAAMS,iBAAiB,GAAGD,OAAO,GAAG,CAAC;;EAErC;EACA,MAAME,gBAAgB,GAAGd,YAAY,CAACQ,MAAM,CAAC,CAACC,GAAG,EAAEH,WAAW,KAAK;IACjE,IAAIA,WAAW,CAACC,IAAI,KAAK,SAAS,EAAE;MAClCE,GAAG,CAACH,WAAW,CAACS,QAAQ,CAAC,GACvB,CAACN,GAAG,CAACH,WAAW,CAACS,QAAQ,CAAC,IAAI,CAAC,IAAIT,WAAW,CAACI,MAAM;IACzD;IACA,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;EAEN,MAAMO,kBAAkB,GAAGC,MAAM,CAACC,IAAI,CAAChB,cAAc,CAAC,CAACG,MAAM,CAC1DU,QAAQ,IAAKD,gBAAgB,CAACC,QAAQ,CAAC,GAAGb,cAAc,CAACa,QAAQ,CACpE,CAAC;EAED,oBACElB,OAAA;IAAAsB,QAAA,gBAEEtB,OAAA,CAACF,QAAQ;MAACyB,EAAE,EAAEP,iBAAkB;MAAAM,QAAA,eAC9BtB,OAAA,CAACH,KAAK;QAAC2B,QAAQ,EAAC,OAAO;QAACC,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE,CAAE;QAAAJ,QAAA,GAAC,6CACM,EAACP,OAAO,CAACY,OAAO,CAAC,CAAC,CAAC,EAAC,WACjE;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,EAGVZ,kBAAkB,CAACa,GAAG,CAAEd,QAAQ,iBAC/BlB,OAAA,CAACH,KAAK;MAAC2B,QAAQ,EAAC,SAAS;MAACC,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAAAJ,QAAA,GAAgB,0CACd,EAACJ,QAAQ,EAAC,IAClD,EAACb,cAAc,CAACa,QAAQ,CAAC,EAAC,WAC5B;IAAA,GAH8CA,QAAQ;MAAAU,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAG/C,CACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAAC7B,EAAA,CAtDQD,WAAW;EAAA,QACGP,QAAQ,EACRA,QAAQ;AAAA;AAAAuC,EAAA,GAFtBhC,WAAW;AAwDpB,eAAeA,WAAW;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}