{"ast":null,"code":"var _jsxFileName = \"/Users/joseignacio/Developer/caixabanktech-hackathon/src/components/Recommendations.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useStore } from \"@nanostores/react\";\nimport { transactionsStore } from \"../stores/transactionStore\";\nimport { CircularProgress, Typography, Box } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Recommendations() {\n  _s();\n  const transactions = useStore(transactionsStore);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [recommendations, setRecommendations] = useState([]);\n  useEffect(() => {\n    setLoading(true);\n    fetch(\"https://jsonplaceholder.typicode.com/posts\") // It's a test of an API to check error handling; I'm not sure if this is what's expected for the task\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch recommendations\");\n      }\n      return response.json();\n    }).then(data => {\n      setRecommendations(data.slice(0, 5));\n      setLoading(false);\n    }).catch(error => {\n      setError(error.message);\n      setLoading(false);\n    });\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Implement logic to compare expenses between months\n  // Instructions:\n  // - Use the transactions to calculate expenses for the current and previous months.\n  // - Filter transactions by type ('expense') and by month/year.\n  // - Compare the total expenses of this month with last month.\n\n  const currentDate = new Date();\n  const currentMonth = currentDate.getMonth();\n  const currentYear = currentDate.getFullYear();\n  const expenses = transactions.filter(transaction => transaction.type === \"expense\" && new Date(transaction.date).getFullYear() === currentYear);\n  const expenseThisMonth = expenses.filter(transaction => new Date(transaction.date).getMonth() === currentMonth).reduce((acc, transaction) => acc + transaction.amount, 0);\n  const lastMonthDate = new Date(currentYear, currentMonth - 1);\n  const expenseLastMonth = expenses.filter(transaction => {\n    const transactionDate = new Date(transaction.date);\n    return transactionDate.getMonth() === lastMonthDate.getMonth() && transactionDate.getFullYear() === lastMonthDate.getFullYear();\n  }).reduce((acc, transaction) => acc + transaction.amount, 0);\n\n  // Generate a message based on the comparison between months\n  // Instructions:\n  // - If there are no expenses for last month, display a message encouraging the user to keep recording.\n  // - If expenses have increased, calculate the percentage increase and suggest reviewing expenses.\n  // - If expenses have decreased, congratulate the user and show the percentage decrease.\n  // - If expenses are the same, notify the user that their spending hasn't changed.\n\n  let message = \"\"; // Implement logic to generate the appropriate message based on the comparison\n\n  if (expenseLastMonth === 0) {\n    message = \"This is your first month recording expenses. Keep it up!\";\n  } else if (expenseThisMonth > expenseLastMonth) {\n    const increasePercentage = (expenseThisMonth - expenseLastMonth) / expenseLastMonth * 100;\n    message = `Your expenses have increased by ${increasePercentage.toFixed(2)}%. Consider reviewing your spending.`;\n  } else if (expenseThisMonth < expenseLastMonth) {\n    const decreasePercentage = (expenseLastMonth - expenseThisMonth) / expenseLastMonth * 100;\n    message = `Great job! You've reduced your expenses by ${decreasePercentage.toFixed(2)}%.`;\n  } else {\n    message = \"Your expenses have remained the same as last month.\";\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      children: \"Recommendations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(Recommendations, \"FerJxMMJ7q8OrpEG48kBBfpEwm0=\", false, function () {\n  return [useStore];\n});\n_c = Recommendations;\nexport default Recommendations;\nvar _c;\n$RefreshReg$(_c, \"Recommendations\");","map":{"version":3,"names":["React","useEffect","useState","useStore","transactionsStore","CircularProgress","Typography","Box","jsxDEV","_jsxDEV","Recommendations","_s","transactions","loading","setLoading","error","setError","recommendations","setRecommendations","fetch","then","response","ok","Error","json","data","slice","catch","message","sx","display","justifyContent","alignItems","height","children","fileName","_jsxFileName","lineNumber","columnNumber","color","currentDate","Date","currentMonth","getMonth","currentYear","getFullYear","expenses","filter","transaction","type","date","expenseThisMonth","reduce","acc","amount","lastMonthDate","expenseLastMonth","transactionDate","increasePercentage","toFixed","decreasePercentage","mt","variant","_c","$RefreshReg$"],"sources":["/Users/joseignacio/Developer/caixabanktech-hackathon/src/components/Recommendations.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useStore } from \"@nanostores/react\";\nimport { transactionsStore } from \"../stores/transactionStore\";\nimport { CircularProgress, Typography, Box } from \"@mui/material\";\n\nfunction Recommendations() {\n  const transactions = useStore(transactionsStore);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [recommendations, setRecommendations] = useState([]);\n\n  useEffect(() => {\n    setLoading(true);\n    fetch(\"https://jsonplaceholder.typicode.com/posts\") // It's a test of an API to check error handling; I'm not sure if this is what's expected for the task\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch recommendations\");\n        }\n        return response.json();\n      })\n      .then((data) => {\n        setRecommendations(data.slice(0, 5));\n        setLoading(false);\n      })\n      .catch((error) => {\n        setError(error.message);\n        setLoading(false);\n      });\n  }, []);\n\n  if (loading) {\n    return (\n      <Box\n        sx={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"100vh\",\n        }}\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box\n        sx={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"100vh\",\n        }}\n      >\n        <Typography color=\"error\">{error}</Typography>\n      </Box>\n    );\n  }\n\n  // Implement logic to compare expenses between months\n  // Instructions:\n  // - Use the transactions to calculate expenses for the current and previous months.\n  // - Filter transactions by type ('expense') and by month/year.\n  // - Compare the total expenses of this month with last month.\n\n  const currentDate = new Date();\n  const currentMonth = currentDate.getMonth();\n  const currentYear = currentDate.getFullYear();\n\n  const expenses = transactions.filter(\n    (transaction) =>\n      transaction.type === \"expense\" &&\n      new Date(transaction.date).getFullYear() === currentYear\n  );\n\n  const expenseThisMonth = expenses\n    .filter(\n      (transaction) => new Date(transaction.date).getMonth() === currentMonth\n    )\n    .reduce((acc, transaction) => acc + transaction.amount, 0);\n\n  const lastMonthDate = new Date(currentYear, currentMonth - 1);\n  const expenseLastMonth = expenses\n    .filter((transaction) => {\n      const transactionDate = new Date(transaction.date);\n      return (\n        transactionDate.getMonth() === lastMonthDate.getMonth() &&\n        transactionDate.getFullYear() === lastMonthDate.getFullYear()\n      );\n    })\n    .reduce((acc, transaction) => acc + transaction.amount, 0);\n\n  // Generate a message based on the comparison between months\n  // Instructions:\n  // - If there are no expenses for last month, display a message encouraging the user to keep recording.\n  // - If expenses have increased, calculate the percentage increase and suggest reviewing expenses.\n  // - If expenses have decreased, congratulate the user and show the percentage decrease.\n  // - If expenses are the same, notify the user that their spending hasn't changed.\n\n  let message = \"\"; // Implement logic to generate the appropriate message based on the comparison\n\n  if (expenseLastMonth === 0) {\n    message = \"This is your first month recording expenses. Keep it up!\";\n  } else if (expenseThisMonth > expenseLastMonth) {\n    const increasePercentage =\n      ((expenseThisMonth - expenseLastMonth) / expenseLastMonth) * 100;\n    message = `Your expenses have increased by ${increasePercentage.toFixed(\n      2\n    )}%. Consider reviewing your spending.`;\n  } else if (expenseThisMonth < expenseLastMonth) {\n    const decreasePercentage =\n      ((expenseLastMonth - expenseThisMonth) / expenseLastMonth) * 100;\n    message = `Great job! You've reduced your expenses by ${decreasePercentage.toFixed(\n      2\n    )}%.`;\n  } else {\n    message = \"Your expenses have remained the same as last month.\";\n  }\n\n  return (\n    <Box sx={{ mt: 4 }}>\n      <Typography variant=\"h5\">Recommendations</Typography>\n      {/* Display the recommendation message according to the change in expenditure */}\n      <Typography>{message}</Typography>\n    </Box>\n  );\n}\n\nexport default Recommendations;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}